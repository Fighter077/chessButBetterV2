@if (loadingTooltip) {
  <div [matTooltip]="loadingTooltip" [matTooltipPosition]="tooltipPosition" [matTooltipClass]="tooltipClass" [matTooltipDisabled]="!loading">
    <ng-container *ngTemplateOutlet="button"></ng-container>
  </div>
} @else {
  <ng-container *ngTemplateOutlet="button"></ng-container>
}

<ng-template #button>
  @switch (variant) {
    <!-- Raised -->
    @case ('raised') {
      <button mat-raised-button [disabled]="loading || disabled" [color]="color" [type]="type"
        [routerLink]="routerLink" [ngClass]="class" [style.width]="fullWidth ? '100%' : null" [matTooltip]="tooltip"
        [matTooltipPosition]="tooltipPosition" [matTooltipClass]="tooltipClass" (click)="onClick($event)">
        <!-- Content -->
        <ng-container *ngTemplateOutlet="contentTpl"></ng-container>
        <!-- Spinner -->
        <ng-container *ngTemplateOutlet="loadingTpl"></ng-container>
      </button>
    }
    <!-- Flat -->
    @case ('flat') {
      <button mat-flat-button [disabled]="loading || disabled" [color]="color" [type]="type"
        [routerLink]="routerLink" [ngClass]="class" [style.width]="fullWidth ? '100%' : null" [matTooltip]="tooltip"
        [matTooltipPosition]="tooltipPosition" [matTooltipClass]="tooltipClass" (click)="onClick($event)">
        <!-- Content -->
        <ng-container *ngTemplateOutlet="contentTpl"></ng-container>
        <!-- Spinner -->
        <ng-container *ngTemplateOutlet="loadingTpl"></ng-container>
      </button>
    }
    <!-- Stroked -->
    @case ('stroked') {
      <button mat-stroked-button [disabled]="loading || disabled" [color]="color" [type]="type"
        [routerLink]="routerLink" [ngClass]="class" [style.width]="fullWidth ? '100%' : null" [matTooltip]="tooltip"
        [matTooltipPosition]="tooltipPosition" [matTooltipClass]="tooltipClass" (click)="onClick($event)">
        <!-- Content -->
        <ng-container *ngTemplateOutlet="contentTpl"></ng-container>
        <!-- Spinner -->
        <ng-container *ngTemplateOutlet="loadingTpl"></ng-container>
      </button>
    }
    <!-- Icon -->
    @case ('icon') {
      <button mat-icon-button [disabled]="loading || disabled" [color]="color" [type]="type"
        [routerLink]="routerLink" [ngClass]="class" [style.width]="fullWidth ? '100%' : null" [matTooltip]="tooltip"
        [matTooltipPosition]="tooltipPosition" [matTooltipClass]="tooltipClass" (click)="onClick($event)">
        <!-- Content -->
        <ng-container *ngTemplateOutlet="contentTpl"></ng-container>
        <!-- Spinner -->
        <ng-container *ngTemplateOutlet="loadingTpl"></ng-container>
      </button>
    }
    <!-- Default to basic -->
    @default {
      <button mat-button [disabled]="loading || disabled" [color]="color" [type]="type"
        [routerLink]="routerLink" [ngClass]="class" [style.width]="fullWidth ? '100%' : null" [matTooltip]="tooltip"
        [matTooltipPosition]="tooltipPosition" [matTooltipClass]="tooltipClass" (click)="onClick($event)">
        <!-- Content -->
        <ng-container *ngTemplateOutlet="contentTpl"></ng-container>
        <!-- Spinner -->
        <ng-container *ngTemplateOutlet="loadingTpl"></ng-container>
      </button>
    }
  }
</ng-template>

<ng-template #contentTpl>
  <div class="button-content" [class.hidden]="loading">
    <ng-content></ng-content>
  </div>
</ng-template>

<ng-template #loadingTpl>
  <div class="spinner-wrapper" [class.hidden]="!loading" *ngIf="loading" @fadeInOut>
    <mat-progress-spinner diameter="24" strokeWidth="3" mode="indeterminate" class="aspect-square" aria-label="loader">
    </mat-progress-spinner>
  </div>
</ng-template>